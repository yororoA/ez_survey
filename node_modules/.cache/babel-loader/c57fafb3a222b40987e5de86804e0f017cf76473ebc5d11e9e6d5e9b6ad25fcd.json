{"ast":null,"code":"var _jsxFileName = \"E:\\\\Desktop\\\\\\u684C\\u9762\\\\\\u5DE5\\u4F5C\\\\\\u7F16\\u7A0B\\\\\\u524D\\u7AEF\\\\projext\\\\project\\\\src\\\\components\\\\draftsDisplay\\\\renderDrafts.jsx\",\n  _s2 = $RefreshSig$();\nimport React, { useCallback, useContext, useState } from 'react';\nimport { RenderDraftsContext } from \"./context/drafts\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport link from '../../style/link/link.module.css';\nimport { getQueDetails } from \"../../utils/getUserSurveys\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RenderDrafts = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  // 鼠标移入移出控制按钮显示\n  const [hoverId, setHoverId] = useState(null);\n  const handleMouseEnter = useCallback(e => {\n    setHoverId(e.target.id);\n  }, [hoverId]);\n  const handleMouseLeave = useCallback(e => {\n    setHoverId(null);\n  }, [hoverId]);\n\n  // element参考信息\n  const drafts = useContext(RenderDraftsContext);\n  const elements = drafts.map(draft => {\n    return {\n      title: draft.title,\n      description: draft.description,\n      id: draft.id\n    };\n  });\n  // 编辑跳转\n  // const handleEditClick = useCallback(e => {\n  // \te.preventDefault();\n  // \tconst data = drafts.filter(draft => draft.id === e.currentTarget.id)[0];\n  // \tconsole.log(data);\n  // \tsessionStorage.setItem('surveyTitle', data.title);\n  // \tsessionStorage.setItem('surveyDescription', data.description);\n  // \tdata.questions.forEach(question => {\n  // \t\tgetQueDetails(question).then(r => {\n  // \t\t\tsessionStorage.setItem(`${r.title}`, JSON.stringify(r));\n  // \t\t});\n  // \t})\n  // }, [drafts])\n  async function handleEditClick(e) {\n    _s();\n    e.preventDefault();\n    const data = drafts.filter(draft => draft.id === e.currentTarget.id)[0];\n    sessionStorage.setItem('surveyTitle', data.title);\n    sessionStorage.setItem('surveyDescription', data.description);\n    await Promise.all(data.questions.map(question => {\n      getQueDetails(question).then(r => {\n        sessionStorage.setItem(`${r.title}`, JSON.stringify(r));\n      });\n    }));\n    useNavigate();\n  }\n  _s(handleEditClick, \"7z+bV9xHBQ1A1bt6m/1oQLk0tZA=\", false, function () {\n    return [useNavigate];\n  });\n  console.log(drafts);\n  console.log(elements);\n  const elementsForRender = elements.map(element => /*#__PURE__*/_jsxDEV(\"fieldset\", {\n    id: element.id,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: element.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: element.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this), hoverId === element.id && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEditClick,\n        id: element.id,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"../publish\",\n          className: link.link,\n          children: '编辑'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: '预览'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: '删除'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: '发布'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, this)]\n  }, element.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 3\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: elementsForRender\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 3\n  }, this);\n};\n_s2(RenderDrafts, \"GRfWaCUYVrslZBvfcXAbAgyhEX0=\");\n_c = RenderDrafts;\nexport default RenderDrafts;\nvar _c;\n$RefreshReg$(_c, \"RenderDrafts\");","map":{"version":3,"names":["React","useCallback","useContext","useState","RenderDraftsContext","Link","useNavigate","link","getQueDetails","jsxDEV","_jsxDEV","RenderDrafts","_s2","_s","$RefreshSig$","hoverId","setHoverId","handleMouseEnter","e","target","id","handleMouseLeave","drafts","elements","map","draft","title","description","handleEditClick","preventDefault","data","filter","currentTarget","sessionStorage","setItem","Promise","all","questions","question","then","r","JSON","stringify","console","log","elementsForRender","element","onMouseEnter","onMouseLeave","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","to","className","_c","$RefreshReg$"],"sources":["E:/Desktop/桌面/工作/编程/前端/projext/project/src/components/draftsDisplay/renderDrafts.jsx"],"sourcesContent":["import React, {useCallback, useContext, useState} from 'react';\r\nimport {RenderDraftsContext} from \"./context/drafts\";\r\nimport {Link, useNavigate} from \"react-router-dom\";\r\nimport link from '../../style/link/link.module.css'\r\nimport {getQueDetails} from \"../../utils/getUserSurveys\";\r\n\r\nconst RenderDrafts = () => {\r\n\t// 鼠标移入移出控制按钮显示\r\n\tconst [hoverId, setHoverId] = useState(null);\r\n\tconst handleMouseEnter = useCallback(e => {\r\n\t\tsetHoverId(e.target.id);\r\n\t}, [hoverId]);\r\n\tconst handleMouseLeave = useCallback(e => {\r\n\t\tsetHoverId(null);\r\n\t}, [hoverId]);\r\n\r\n\r\n\t// element参考信息\r\n\tconst drafts = useContext(RenderDraftsContext);\r\n\tconst elements = drafts.map(draft => {\r\n\t\treturn {\r\n\t\t\ttitle: draft.title,\r\n\t\t\tdescription: draft.description,\r\n\t\t\tid: draft.id\r\n\t\t}\r\n\t});\r\n\t// 编辑跳转\r\n\t// const handleEditClick = useCallback(e => {\r\n\t// \te.preventDefault();\r\n\t// \tconst data = drafts.filter(draft => draft.id === e.currentTarget.id)[0];\r\n\t// \tconsole.log(data);\r\n\t// \tsessionStorage.setItem('surveyTitle', data.title);\r\n\t// \tsessionStorage.setItem('surveyDescription', data.description);\r\n\t// \tdata.questions.forEach(question => {\r\n\t// \t\tgetQueDetails(question).then(r => {\r\n\t// \t\t\tsessionStorage.setItem(`${r.title}`, JSON.stringify(r));\r\n\t// \t\t});\r\n\t// \t})\r\n\t// }, [drafts])\r\n\tasync function handleEditClick(e) {\r\n\t\te.preventDefault();\r\n\t\tconst data = drafts.filter(draft => draft.id === e.currentTarget.id)[0];\r\n\t\tsessionStorage.setItem('surveyTitle', data.title);\r\n\t\tsessionStorage.setItem('surveyDescription', data.description);\r\n\t\tawait Promise.all(data.questions.map(question => {\r\n\t\t\tgetQueDetails(question).then(r => {\r\n\t\t\t\tsessionStorage.setItem(`${r.title}`, JSON.stringify(r));\r\n\t\t\t});\r\n\t\t}))\r\n\t\tuseNavigate()\r\n\t}\r\n\r\n\r\n\tconsole.log(drafts);\r\n\tconsole.log(elements);\r\n\tconst elementsForRender = elements.map(element => (\r\n\t\t<fieldset key={element.id} id={element.id} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\r\n\t\t\t<div>\r\n\t\t\t\t<div>{element.title}</div>\r\n\t\t\t\t<div>{element.description}</div>\r\n\t\t\t</div>\r\n\t\t\t<hr/>\r\n\t\t\t{hoverId === element.id && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button onClick={handleEditClick} id={element.id}>\r\n\t\t\t\t\t\t<Link to=\"../publish\" className={link.link}>{'编辑'}</Link>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button>{'预览'}</button>\r\n\t\t\t\t\t<button>{'删除'}</button>\r\n\t\t\t\t\t<button>{'发布'}</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</fieldset>\r\n\t))\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{elementsForRender}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RenderDrafts;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}