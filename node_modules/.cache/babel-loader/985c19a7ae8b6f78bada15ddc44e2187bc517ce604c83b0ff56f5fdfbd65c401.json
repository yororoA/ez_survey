{"ast":null,"code":"/* 检查问卷是否存在\r\n* @accept`surveyId`: 需要检测的 surveyId */\nexport async function checkSurvey(surveyId) {\n  const checkResp = await fetch(`http://localhost:1337/api/surveys/${surveyId}`);\n  if (!checkResp.ok && checkResp.status === 404) {\n    return {\n      isValid: false,\n      surveyData: null,\n      error: {\n        code: 1,\n        message: '该问卷不存在'\n      }\n    };\n  }\n  const data = await checkResp.json();\n  if (!data.data.published) {\n    return {\n      isValid: false,\n      surveyData: null,\n      error: {\n        code: 2,\n        message: '该问卷未发布'\n      }\n    };\n  }\n  if (data.data.endCollection) {\n    return {\n      isValid: false,\n      surveyData: null,\n      error: {\n        code: 3,\n        message: '该问卷已结束收集'\n      }\n    };\n  }\n  return {\n    isValid: true,\n    surveyData: {\n      title: data.data.title,\n      description: data.data.description,\n      questions: data.data.questions,\n      clientId: data.data.clientId\n    },\n    error: null\n  };\n}","map":{"version":3,"names":["checkSurvey","surveyId","checkResp","fetch","ok","status","isValid","surveyData","error","code","message","data","json","published","endCollection","title","description","questions","clientId"],"sources":["E:/Desktop/桌面/工作/编程/前端/projext/project/src/utils/checkSurvey.js"],"sourcesContent":["/* 检查问卷是否存在\r\n* @accept`surveyId`: 需要检测的 surveyId */\r\nexport async function checkSurvey(surveyId) {\r\n\tconst checkResp = await fetch(`http://localhost:1337/api/surveys/${surveyId}`);\r\n\tif (!checkResp.ok && checkResp.status === 404) {\r\n\t\treturn {\r\n\t\t\tisValid: false,\r\n\t\t\tsurveyData: null,\r\n\t\t\terror: {\r\n\t\t\t\tcode: 1,\r\n\t\t\t\tmessage: '该问卷不存在'\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst data = await checkResp.json();\r\n\tif(!data.data.published){\r\n\t\treturn {\r\n\t\t\tisValid: false,\r\n\t\t\tsurveyData: null,\r\n\t\t\terror: {\r\n\t\t\t\tcode: 2,\r\n\t\t\t\tmessage: '该问卷未发布'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif(data.data.endCollection){\r\n\t\treturn {\r\n\t\t\tisValid: false,\r\n\t\t\tsurveyData: null,\r\n\t\t\terror: {\r\n\t\t\t\tcode: 3,\r\n\t\t\t\tmessage: '该问卷已结束收集'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tisValid: true,\r\n\t\tsurveyData: {\r\n\t\t\ttitle: data.data.title,\r\n\t\t\tdescription: data.data.description,\r\n\t\t\tquestions: data.data.questions,\r\n\t\t\tclientId: data.data.clientId\r\n\t\t},\r\n\t\terror: null\r\n\t}\r\n}"],"mappings":"AAAA;AACA;AACA,OAAO,eAAeA,WAAWA,CAACC,QAAQ,EAAE;EAC3C,MAAMC,SAAS,GAAG,MAAMC,KAAK,CAAC,qCAAqCF,QAAQ,EAAE,CAAC;EAC9E,IAAI,CAACC,SAAS,CAACE,EAAE,IAAIF,SAAS,CAACG,MAAM,KAAK,GAAG,EAAE;IAC9C,OAAO;MACNC,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE,IAAI;MAChBC,KAAK,EAAE;QACNC,IAAI,EAAE,CAAC;QACPC,OAAO,EAAE;MACV;IACD,CAAC;EACF;EACA,MAAMC,IAAI,GAAG,MAAMT,SAAS,CAACU,IAAI,CAAC,CAAC;EACnC,IAAG,CAACD,IAAI,CAACA,IAAI,CAACE,SAAS,EAAC;IACvB,OAAO;MACNP,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE,IAAI;MAChBC,KAAK,EAAE;QACNC,IAAI,EAAE,CAAC;QACPC,OAAO,EAAE;MACV;IACD,CAAC;EACF;EACA,IAAGC,IAAI,CAACA,IAAI,CAACG,aAAa,EAAC;IAC1B,OAAO;MACNR,OAAO,EAAE,KAAK;MACdC,UAAU,EAAE,IAAI;MAChBC,KAAK,EAAE;QACNC,IAAI,EAAE,CAAC;QACPC,OAAO,EAAE;MACV;IACD,CAAC;EACF;EACA,OAAO;IACNJ,OAAO,EAAE,IAAI;IACbC,UAAU,EAAE;MACXQ,KAAK,EAAEJ,IAAI,CAACA,IAAI,CAACI,KAAK;MACtBC,WAAW,EAAEL,IAAI,CAACA,IAAI,CAACK,WAAW;MAClCC,SAAS,EAAEN,IAAI,CAACA,IAAI,CAACM,SAAS;MAC9BC,QAAQ,EAAEP,IAAI,CAACA,IAAI,CAACO;IACrB,CAAC;IACDV,KAAK,EAAE;EACR,CAAC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}