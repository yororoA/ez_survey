{"ast":null,"code":"import { getUserData } from \"./getUserData\";\n\n/*查询用户绑定的survey\r\n* @getDrafts Bool, 是否获取草稿, false为获取已发布*/\nexport async function getUserSurveys(getDrafts) {\n  // 获取用户数据\n  const data = await getUserData();\n  // console.log(data);\n  if (getDrafts) {\n    return data.data.surveys.filter(survey => survey.published === false);\n  }\n}\n\n/* 根据 `surveyId` 查询相应 `survey` 的 `questions` */\nasync function getSurveyQues(surveyId) {\n  const surveys = [];\n  const questions = [];\n  const url = `http://localhost:1337/api/surveys/${surveyId}`;\n  try {\n    const resp = await fetch(url);\n    if (!resp.ok) {\n      throw new Error(`获取数据失败: ${resp.status}`);\n    }\n    const surveyDetails = await resp.json();\n  } catch (err) {\n    console.error(err);\n    return null;\n  }\n}","map":{"version":3,"names":["getUserData","getUserSurveys","getDrafts","data","surveys","filter","survey","published","getSurveyQues","surveyId","questions","url","resp","fetch","ok","Error","status","surveyDetails","json","err","console","error"],"sources":["E:/Desktop/桌面/工作/编程/前端/projext/project/src/utils/getUserSurveys.js"],"sourcesContent":["import {getUserData} from \"./getUserData\";\r\n\r\n/*查询用户绑定的survey\r\n* @getDrafts Bool, 是否获取草稿, false为获取已发布*/\r\nexport async function getUserSurveys(getDrafts) {\r\n\t// 获取用户数据\r\n\tconst data = await getUserData();\r\n\t// console.log(data);\r\n\tif (getDrafts) {\r\n\t\treturn data.data.surveys.filter(survey => survey.published === false);\r\n\t}\r\n}\r\n\r\n/* 根据 `surveyId` 查询相应 `survey` 的 `questions` */\r\nasync function getSurveyQues(surveyId) {\r\n\tconst surveys = [];\r\n\tconst questions = [];\r\n\tconst url = `http://localhost:1337/api/surveys/${surveyId}`;\r\n\ttry {\r\n\t\tconst resp = await fetch(url);\r\n\t\tif (!resp.ok) {\r\n\t\t\tthrow new Error(`获取数据失败: ${resp.status}`);\r\n\t\t}\r\n\t\tconst surveyDetails = await resp.json();\r\n\t\t\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t\treturn null;\r\n\t}\r\n}"],"mappings":"AAAA,SAAQA,WAAW,QAAO,eAAe;;AAEzC;AACA;AACA,OAAO,eAAeC,cAAcA,CAACC,SAAS,EAAE;EAC/C;EACA,MAAMC,IAAI,GAAG,MAAMH,WAAW,CAAC,CAAC;EAChC;EACA,IAAIE,SAAS,EAAE;IACd,OAAOC,IAAI,CAACA,IAAI,CAACC,OAAO,CAACC,MAAM,CAACC,MAAM,IAAIA,MAAM,CAACC,SAAS,KAAK,KAAK,CAAC;EACtE;AACD;;AAEA;AACA,eAAeC,aAAaA,CAACC,QAAQ,EAAE;EACtC,MAAML,OAAO,GAAG,EAAE;EAClB,MAAMM,SAAS,GAAG,EAAE;EACpB,MAAMC,GAAG,GAAG,qCAAqCF,QAAQ,EAAE;EAC3D,IAAI;IACH,MAAMG,IAAI,GAAG,MAAMC,KAAK,CAACF,GAAG,CAAC;IAC7B,IAAI,CAACC,IAAI,CAACE,EAAE,EAAE;MACb,MAAM,IAAIC,KAAK,CAAC,WAAWH,IAAI,CAACI,MAAM,EAAE,CAAC;IAC1C;IACA,MAAMC,aAAa,GAAG,MAAML,IAAI,CAACM,IAAI,CAAC,CAAC;EAExC,CAAC,CAAC,OAAOC,GAAG,EAAE;IACbC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,OAAO,IAAI;EACZ;AACD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}